import{r as C,h as g,x as D,o as r,f as a,a as o,u as l,w as b,F as i,Z as F,b as e,j as U,d as _,p as m,i as c,v as y,t as u,e as L,s as w,n as M,O}from"./app-4cf649ca.js";import{_ as z}from"./AuthenticatedLayout-cbb3e46c.js";import{B as E}from"./Breadcrumb-f1c489ac.js";import{_ as I}from"./Alert-8ade166f.js";import{S as P}from"./Status-80576172.js";import{r as T}from"./PlusIcon-18baa55b.js";import{r as A}from"./PencilSquareIcon-3ee02e00.js";import"./TruckIcon-2f13eb25.js";import"./XMarkIcon-1e2e326f.js";import"./hidden-253ee999.js";import"./ShoppingCartIcon-90f63347.js";import"./ShoppingBagIcon-e5743d77.js";import"./XMarkIcon-4b7ba5d6.js";import"./ChevronDownIcon-9563394f.js";import"./_plugin-vue_export-helper-c27b6911.js";const W={class:"bg-white shadow"},Z={class:"px-4 sm:px-6 lg:max-w-6xl lg:mx-auto lg:px-8"},q={class:"py-6 md:flex md:items-center md:justify-between lg:border-t lg:border-gray-200"},G={class:"flex-1 min-w-0"},H={class:"mt-6 h-9 flex space-x-3 md:mt-0 md:ml-4"},J={class:"py-5"},K={class:"max-w-6xl mx-auto sm:px-6 lg:px-8"},Q={class:"bg-white shadow sm:rounded-lg"},X={class:"flex flex-col sm:flex-row sm:justify-between items-center px-4 py-5 border-b border-gray-200 sm:px-8"},Y=e("p",{class:"max-w-2xl leading-10 text-gray-700 text-lg font-medium mb-4 sm:mb-0"},"Branch Access",-1),ee={class:"flex-shrink-0 flex space-x-3"},se={class:"px-5 py-5 mx-auto max-w-5xl space-y-4"},te={class:"grid sm:grid-cols-5 sm:gap-2"},re=e("dt",{class:"text-sm sm:leading-10 font-semibold text-gray-700 tracking-wider sm:text-right pr-8"}," Branch ",-1),ae={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-4 grid sm:grid-cols-4 sm:gap-2"},oe={class:"inline-flex items-center mr-5"},ne=["onUpdate:modelValue"],le={class:"ml-2 tracking-wide cursor-pointer"},ie={class:"grid sm:grid-cols-5 sm:gap-2"},ce=e("dt",{class:"text-sm sm:leading-10 font-semibold text-gray-700 tracking-wider sm:text-right pr-8"}," Role ",-1),de={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-4 grid sm:grid-cols-4 sm:gap-2"},me={class:"inline-flex items-center mr-5"},ue=["onUpdate:modelValue"],pe={class:"ml-2 tracking-wide cursor-pointer"},he=["onSubmit"],_e={class:"space-y-8 py-6 px-6"},xe={class:"table-auto sm:table-fixed min-w-full w-full"},fe=e("th",{class:"w-12 px-5 py-2 border-b bg-gray-100 text-xs font-bold uppercase tracking-wider text-center"},"S.N.",-1),ge=e("th",{class:"w-32 px-5 py-2 border-b bg-gray-100 text-xs font-bold uppercase tracking-wider text-left"},"Name",-1),be=e("th",{class:"w-16 px-5 py-2 border-b bg-gray-100 text-xs font-bold uppercase tracking-wider text-left"},"Role",-1),ye={class:"bg-white"},we={class:"px-3 py-1 whitespace-wrap break-words"},ve={class:"text-sm leading-5 text-gray-700 text-center"},ke={class:"px-3 py-1 whitespace-wrap break-words"},Be={class:"px-3 py-1 whitespace-wrap break-words"},Ce=["id","onUpdate:modelValue"],Ue=e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center ml-4"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900"})])],-1),Ae={class:"mx-auto"},Ve={class:"flex justify-end"},Se={type:"submit",class:"ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},qe={__name:"Access",props:{users:Array,all_branches:Array,all_roles:Array},setup(V){const x=V,p=x.all_roles;p.push({name:"Waiter"}),p.push({name:"Chef"}),p.push({name:"Barista"});const h=C(x.all_branches.map(t=>({id:t.id,name:t.name}))),f=C(p.map(t=>({name:t.name}))),S=g(()=>f.value.filter(t=>t.is_checked).map(t=>t.name.toLowerCase())),v=g(()=>h.value.filter(t=>t.is_checked).length==0),j=g(()=>f.value.filter(t=>t.is_checked)==0),k=D({users:x.users});function B(){O.post(route("branch.access_update"),k)}const N=[{name:"Branches",href:route("branch.index"),current:!1},{name:"Access Page",href:"#",current:!1}],$={super_admin:"bg-red-100 text-red-700 rounded-full",waiter:"bg-yellow-100 text-yellow-800 rounded-full",chef:"bg-blue-100 text-blue-700 rounded-full",barista:"bg-purple-100 text-purple-700 rounded-full",rider:"bg-pink-100 text-pink-700 rounded-full",pending:"bg-yellow-100 text-yellow-900 rounded-md",active:"bg-green-100 text-green-900 rounded-md",inactive:"bg-rose-100 text-rose-900 rounded-md"};return(t,je)=>(r(),a(i,null,[o(l(F),{title:"Branch Access"}),o(z,null,{default:b(()=>[e("div",W,[e("div",Z,[e("div",q,[e("div",G,[o(E,{breadcrumbs:N})]),e("div",H,[o(l(U),{href:t.route("branch.create"),class:"inline-flex items-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white hover:bg-gray-50 text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-primary-400"},{default:b(()=>[o(l(T),{class:"-ml-1 mr-2 h-5 w-5 text-gray-400","aria-hidden":"true"}),_(" Create ")]),_:1},8,["href"])])])])]),e("div",J,[e("div",K,[e("div",Q,[e("div",X,[Y,e("div",ee,[e("button",{type:"submit",onClick:B,class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-600"},[o(l(A),{class:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),_(" Update ")])])]),o(I),e("dl",se,[e("div",te,[re,e("dd",ae,[(r(!0),a(i,null,m(h.value,s=>(r(),a("div",{key:s.name,class:"mt-3 space-y-4"},[e("label",oe,[c(e("input",{"onUpdate:modelValue":n=>s.is_checked=n,type:"checkbox",class:"form-checkbox w-5 h-5 border-gray-300 text-blue-500 cursor-pointer focus:ring-blue-500 rounded"},null,8,ne),[[y,s.is_checked]]),e("span",le,u(s.name),1)])]))),128))])]),e("div",ie,[ce,e("dd",de,[(r(!0),a(i,null,m(f.value,s=>(r(),a("div",{key:s.name,class:"mt-3 space-y-4"},[e("label",me,[c(e("input",{"onUpdate:modelValue":n=>s.is_checked=n,type:"checkbox",class:"form-checkbox w-5 h-5 border-gray-300 text-purple-500 cursor-pointer focus:ring-purple-500 rounded"},null,8,ue),[[y,s.is_checked]]),e("span",pe,u(s.name),1)])]))),128))])])]),e("form",{onSubmit:L(B,["prevent"])},[e("dl",_e,[e("table",xe,[e("thead",null,[e("tr",null,[fe,ge,be,(r(!0),a(i,null,m(h.value,s=>c((r(),a("th",{key:s.id,class:"px-5 py-2 border-b bg-gray-100 text-xs font-bold uppercase tracking-wider text-center"},u(s.name),1)),[[w,s.is_checked||v.value]])),128))])]),e("tbody",ye,[(r(!0),a(i,null,m(k.users.filter(s=>s.is_admin!=!0),(s,n)=>c((r(),a("tr",{key:s.id,class:M([n%2==0?"bg-white":"bg-gray-50","border-b"])},[e("td",we,[e("div",ve,u(parseInt(n)+1),1)]),e("td",ke,[o(l(U),{href:t.route("user.edit",s.id),class:"text-sm leading-5 text-blue-600 hover:underline"},{default:b(()=>[_(u(s.name),1)]),_:2},1032,["href"])]),e("td",Be,[o(P,{class:"ml-1",name:s.role_name,colors:$},null,8,["name"])]),(r(!0),a(i,null,m(h.value,d=>c((r(),a("td",{key:d.id,class:"p-2 whitespace-nowrap text-center"},[c(e("input",{id:`branch_${d.id}_${s.id}`,type:"checkbox","onUpdate:modelValue":R=>s.branch_access[d.id]=R,class:"form-checkbox w-5 h-5 border-gray-300 text-indigo-500 cursor-pointer focus:ring-indigo-500 rounded"},null,8,Ce),[[y,s.branch_access[d.id]]])])),[[w,d.is_checked||v.value]])),128))],2)),[[w,S.value.includes(s.role_name)||j.value]])),128))])]),Ue,e("div",Ae,[e("div",Ve,[e("button",Se,[o(l(A),{class:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),_(" Update ")])])])])],40,he)])])])]),_:1})],64))}};export{qe as default};
