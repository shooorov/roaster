import{G as J,r as w,J as ne,h as F,k as U,H as re,E as he,L as ie,o as r,f as c,b as e,K as me,T as ce,x as de,a as m,w as k,u as l,j as H,t as i,c as G,d as $,g as R,i as C,s as D,n as S,D as pe,F as P,p as N,l as _e,U as xe,m as ge,Z as ve}from"./app-4cf649ca.js";import{r as be}from"./ShoppingCartIcon-90f63347.js";import{t as Q,u as ee,o as L,e as we,l as V,H as X,i as ye,p as ke,a as te,b as K}from"./XMarkIcon-1e2e326f.js";import{r as se,M as $e,R as Ce,h as De,y as Se}from"./XMarkIcon-4b7ba5d6.js";import{r as Te}from"./ChevronDownIcon-9563394f.js";import{_ as je}from"./Notification-0fe8eda5.js";var Me=(n=>(n[n.Open=0]="Open",n[n.Closed=1]="Closed",n))(Me||{});let ue=Symbol("DisclosureContext");function Z(n){let s=ie(ue,null);if(s===null){let u=new Error(`<${n} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(u,Z),u}return s}let fe=Symbol("DisclosurePanelContext");function Oe(){return ie(fe,null)}let Ie=J({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(n,{slots:s,attrs:u}){let _=w(n.defaultOpen?0:1),o=w(null),y=w(null),f={buttonId:w(`headlessui-disclosure-button-${Q()}`),panelId:w(`headlessui-disclosure-panel-${Q()}`),disclosureState:_,panel:o,button:y,toggleDisclosure(){_.value=ee(_.value,{0:1,1:0})},closeDisclosure(){_.value!==1&&(_.value=1)},close(p){f.closeDisclosure();let b=(()=>p?p instanceof HTMLElement?p:p.value instanceof HTMLElement?L(p):L(f.button):L(f.button))();b==null||b.focus()}};return ne(ue,f),we(F(()=>ee(_.value,{0:V.Open,1:V.Closed}))),()=>{let{defaultOpen:p,...b}=n,T={open:_.value===0,close:f.close};return X({theirProps:b,ourProps:{},slot:T,slots:s,attrs:u,name:"Disclosure"})}}}),Ae=J({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(n,{attrs:s,slots:u,expose:_}){let o=Z("DisclosureButton"),y=Oe(),f=F(()=>y===null?!1:y.value===o.panelId.value);U(()=>{f.value||n.id!==null&&(o.buttonId.value=n.id)}),re(()=>{f.value||(o.buttonId.value=null)});let p=w(null);_({el:p,$el:p}),f.value||he(()=>{o.button.value=p.value});let b=ye(F(()=>({as:n.as,type:s.type})),p);function T(){var x;n.disabled||(f.value?(o.toggleDisclosure(),(x=L(o.button))==null||x.focus()):o.toggleDisclosure())}function M(x){var O;if(!n.disabled)if(f.value)switch(x.key){case K.Space:case K.Enter:x.preventDefault(),x.stopPropagation(),o.toggleDisclosure(),(O=L(o.button))==null||O.focus();break}else switch(x.key){case K.Space:case K.Enter:x.preventDefault(),x.stopPropagation(),o.toggleDisclosure();break}}function A(x){switch(x.key){case K.Space:x.preventDefault();break}}return()=>{var x;let O={open:o.disclosureState.value===0},{id:v,...I}=n,h=f.value?{ref:p,type:b.value,onClick:T,onKeydown:M}:{id:(x=o.buttonId.value)!=null?x:v,ref:p,type:b.value,"aria-expanded":o.disclosureState.value===0,"aria-controls":o.disclosureState.value===0||L(o.panel)?o.panelId.value:void 0,disabled:n.disabled?!0:void 0,onClick:T,onKeydown:M,onKeyup:A};return X({ourProps:h,theirProps:I,slot:O,attrs:s,slots:u,name:"DisclosureButton"})}}}),Pe=J({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(n,{attrs:s,slots:u,expose:_}){let o=Z("DisclosurePanel");U(()=>{n.id!==null&&(o.panelId.value=n.id)}),re(()=>{o.panelId.value=null}),_({el:o.panel,$el:o.panel}),ne(fe,o.panelId);let y=ke(),f=F(()=>y!==null?(y.value&V.Open)===V.Open:o.disclosureState.value===0);return()=>{var p;let b={open:o.disclosureState.value===0,close:o.close},{id:T,...M}=n,A={id:(p=o.panelId.value)!=null?p:T,ref:o.panel};return X({ourProps:A,theirProps:M,slot:b,attrs:s,slots:u,features:te.RenderStrategy|te.Static,visible:f.value,name:"DisclosurePanel"})}}});function ze(n,s){return r(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})])}function Be(n,s){return r(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"})])}function Ne(n,s){return r(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})])}function le(n,s){return r(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{d:"M5.85 3.5a.75.75 0 00-1.117-1 9.719 9.719 0 00-2.348 4.876.75.75 0 001.479.248A8.219 8.219 0 015.85 3.5zM19.267 2.5a.75.75 0 10-1.118 1 8.22 8.22 0 011.987 4.124.75.75 0 001.48-.248A9.72 9.72 0 0019.266 2.5z"}),e("path",{"fill-rule":"evenodd",d:"M12 2.25A6.75 6.75 0 005.25 9v.75a8.217 8.217 0 01-2.119 5.52.75.75 0 00.298 1.206c1.544.57 3.16.99 4.831 1.243a3.75 3.75 0 107.48 0 24.583 24.583 0 004.83-1.244.75.75 0 00.298-1.205 8.217 8.217 0 01-2.118-5.52V9A6.75 6.75 0 0012 2.25zM9.75 18c0-.034 0-.067.002-.1a25.05 25.05 0 004.496 0l.002.1a2.25 2.25 0 11-4.5 0z","clip-rule":"evenodd"})])}function ae(n,s){return r(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M9.493 2.853a.75.75 0 00-1.486-.205L7.545 6H4.198a.75.75 0 000 1.5h3.14l-.69 5H3.302a.75.75 0 000 1.5h3.14l-.435 3.148a.75.75 0 001.486.205L7.955 14h2.986l-.434 3.148a.75.75 0 001.486.205L12.456 14h3.346a.75.75 0 000-1.5h-3.14l.69-5h3.346a.75.75 0 000-1.5h-3.14l.435-3.147a.75.75 0 00-1.486-.205L12.045 6H9.059l.434-3.147zM8.852 7.5l-.69 5h2.986l.69-5H8.852z","clip-rule":"evenodd"})])}const He={class:"min-h-full h-screen"},Le={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},Ee={class:"relative flex h-16 items-center justify-between"},Ke={class:"flex items-center"},Fe=["src"],Re={key:1,class:"text-secondary-500 px-3 text-xl font-fancy leading-6 font-medium"},Ve={class:"flex flex-1 justify-center px-2 lg:ml-6 lg:justify-end"},Ue={key:0,class:"flex items-center space-x-2"},qe=e("span",{class:"sr-only"},"Kitchen Running",-1),We=["innerHTML"],Ye={class:"flex lg:hidden"},Ge=e("span",{class:"sr-only"},"Open main menu",-1),Je={class:"hidden lg:ml-4 lg:block"},Xe={class:"flex items-center"},Ze=["src"],Qe={class:"hidden ml-3 text-gray-700 text-sm font-medium lg:block"},et=e("span",{class:"sr-only"},"Open user menu for ",-1),tt={class:"mx-4 mt-3 px-3 py-1 flex items-center justify-between border border-dashed border-slate-400 space-x-2"},st=e("p",{class:"text-sm"},"Avg Target",-1),lt={class:"truncate"},at={class:"py-1"},ot={class:"border-t border-slate-200 pt-4 pb-3"},nt={class:"flex items-center px-5"},rt={class:"flex-shrink-0"},it=["src"],ct={class:"ml-3"},dt={class:"text-base font-medium text-slate-800"},ut={class:"text-sm font-medium text-slate-500"},ft={type:"button",class:"ml-auto flex-shrink-0 rounded-full bg-slate-50 p-1 text-slate-400 hover:text-slate-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-slate-50"},ht=e("span",{class:"sr-only"},"View notifications",-1),mt={class:"mx-4 mt-3 px-3 py-1 flex items-center justify-between border border-dashed border-slate-400 space-x-2"},pt=e("p",{class:"text-sm"},"Avg Target",-1),_t={class:"truncate"},xt={class:"py-1"},gt={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},vt={class:"relative z-10 flex py-3 sm:h-16 flex-shrink-0 bg-white overflow-x-auto"},bt={class:"px-2 w-full flex flex-row sm:items-center"},wt={role:"list",class:"relative w-full max-h-40 flex gap-2.5 sm:flex-wrap z-0 overflow-x-auto sm:overflow-y-auto px-1 py-3"},yt={class:"flex-1 min-w-0 flex justify-center items-center"},kt={class:S(["text-sm leading-5 font-medium capitalize"])},$t={class:""},Ct={__name:"KitchenLayout",setup(n){var O;const s=me(),u=ce({status:s.props.kitchen?"stop":"start"}),_=de(s.props.order_productions.length>0?s.props.order_productions[0]:{order_id:null}),o=w((O=s.props.kitchen)==null?void 0:O.started_at),y=w(null),f=w(!1),p=w(s.props.auth.user.is_cook);U(()=>{M()});const b=w(null);b.value=setInterval(function(){window.location.reload()},1*60*1e3);const T=()=>{u.post(route("kitchen.clock"),{onSuccess:()=>{var v;console.log(u),f.value=!1,y.value="",u.status=="stop"?(o.value=null,u.status="start"):(o.value=(v=s.props.kitchen)==null?void 0:v.started_at,u.status="stop")},onFinish:()=>{M()}})};function M(){console.log("count up"),o.value?f.value=setInterval(function(){y.value=A(new Date(o.value).getTime())},1e3):f.value&&clearInterval(f.value)}const A=v=>{var I=new Date().getTime()-v;let h=Math.floor(I/(1e3*60*60*24)),a=Math.floor(I%(1e3*60*60*24)/(1e3*60*60)),j=Math.floor(I%(1e3*60*60)/(1e3*60)),t=Math.floor(I%(1e3*60)/1e3),d="";return h&&(d+=h+"<span class='mr-2 text-xs text-gray-700 uppercase'>days</span>"),a&&(d+=a+"<span class='mr-2 text-xs text-gray-700 uppercase'>hrs</span>"),j&&(d+=j+"<span class='mr-2 text-xs text-gray-700 uppercase'>mins</span>"),t&&(d+=t+"<span class='mr-2 text-xs text-gray-700 uppercase'>secs</span>"),d},x=[{name:"Kitchen Clock Logs",href:route("kitchen.index")},{name:"Yesterday Kitchen",href:route("production.index",{date:"yesterday"})},{name:"Logout",href:route("logout"),as:"button",method:"POST"}];return(v,I)=>(r(),c("div",He,[m(l(Ie),{as:"nav",class:"bg-yellow-50 border-b border-yellow-100"},{default:k(({open:h})=>[e("div",Le,[e("div",Ee,[e("div",Ke,[m(l(H),{href:"/",class:"flex-shrink-0"},{default:k(()=>[l(s).props.app.logo?(r(),c("img",{key:0,class:"h-16 w-auto",src:l(s).props.app.logo,alt:"logo"},null,8,Fe)):(r(),c("span",Re,i(l(s).props.app.name),1))]),_:1}),l(s).props.navigation.routes.includes("pos.create")?(r(),G(l(H),{key:0,href:v.route("pos.create"),class:"ml-6 inline-flex items-center rounded border border-transparent bg-yellow-500 px-4 py-1.5 text-sm font-medium text-white shadow-sm hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2"},{default:k(()=>[m(l(be),{class:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),$(" POS ")]),_:1},8,["href"])):R("",!0)]),e("div",Ve,[f.value?(r(),c("div",Ue,[qe,e("p",{class:"truncate text-lg font-medium text-red-500",innerHTML:y.value??" "},null,8,We)])):R("",!0),C(e("button",{type:"button",onClick:T,class:S(["inline-flex items-center rounded border border-transparent px-4 py-1.5 text-sm font-medium text-white shadow-sm  focus:outline-none focus:ring-2  focus:ring-offset-2",f.value?"bg-red-500 hover:bg-red-700 focus:ring-red-500":"bg-green-500 hover:bg-green-700 focus:ring-green-500"])},[m(l(Ne),{class:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),$(" "+i(f.value?"OFF":"ON"),1)],2),[[D,p.value]])]),e("div",Ye,[m(l(Ae),{class:"inline-flex items-center justify-center rounded-md bg-yellow-50 p-2 text-yellow-400 hover:bg-yellow-100 hover:text-yellow-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-yellow-50"},{default:k(()=>[Ge,h?(r(),G(l(se),{key:1,class:"block h-6 w-6","aria-hidden":"true"})):(r(),G(l(ze),{key:0,class:"block h-6 w-6","aria-hidden":"true"}))]),_:2},1024)]),e("div",Je,[e("div",Xe,[m(l($e),{as:"div",class:"relative ml-3 flex-shrink-0"},{default:k(()=>[e("div",null,[m(l(Ce),{class:"max-w-xs bg-inherit rounded-full flex items-center text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 lg:p-2 lg:rounded-md"},{default:k(()=>[e("img",{class:"object-cover h-8 w-8 rounded-full",src:l(s).props.auth.user.image_url??l(s).props.app.avatar,alt:"Image path"},null,8,Ze),e("span",Qe,[et,$(" "+i(l(s).props.auth.user.name),1)]),m(l(Te),{class:"hidden shrink-0 ml-1 h-5 w-5 text-gray-400 lg:block","aria-hidden":"true"})]),_:1})]),m(pe,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:k(()=>[m(l(De),{class:"absolute right-0 z-20 mt-2 w-64 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:k(()=>[e("div",tt,[st,e("p",lt,i(l(s).props.average_time),1)]),e("div",at,[(r(),c(P,null,N(x,a=>m(l(Se),{key:a.name},{default:k(({active:j})=>[m(l(H),{href:a.href,as:a.as,method:a.method,class:S([j?"bg-slate-100":"","block w-full text-left py-2 px-4 text-sm text-slate-700"])},{default:k(()=>[$(i(a.name),1)]),_:2},1032,["href","as","method","class"])]),_:2},1024)),64))])]),_:1})]),_:1})]),_:1})])])])]),m(l(Pe),{class:"border-b border-slate-200 bg-slate-50 lg:hidden"},{default:k(()=>[e("div",ot,[e("div",nt,[e("div",rt,[e("img",{class:"h-10 w-10 rounded-full",src:l(s).props.auth.user.image_url??l(s).props.app.avatar,alt:""},null,8,it)]),e("div",ct,[e("div",dt,i(l(s).props.auth.user.name),1),e("div",ut,i(l(s).props.auth.user.email),1)]),e("button",ft,[ht,m(l(Be),{class:"h-6 w-6","aria-hidden":"true"})])]),e("div",mt,[pt,e("p",_t,i(l(s).props.average_time),1)]),e("div",xt,[(r(),c(P,null,N(x,a=>m(l(H),{key:a.name,href:a.href,as:a.as,method:a.method,class:S([v.active?"bg-slate-100":"","block w-full text-left py-2 px-4 text-sm text-slate-700"])},{default:k(()=>[$(i(a.name),1)]),_:2},1032,["href","as","method","class"])),64))])])]),_:1})]),_:1}),e("header",gt,[e("div",vt,[e("div",bt,[e("ul",wt,[(r(!0),c(P,null,N(l(s).props.pending_orders,(h,a)=>(r(),c("li",{key:a},[e("div",yt,[m(l(H),{href:v.route("production.index",{order_id:h.id}),class:S(["inline-flex items-center gap-x-1.5 rounded-md bg-indigo-50 px-2 py-1.5 text-sm font-medium text-indigo-600 shadow-sm hover:bg-indigo-100 border",h.status=="pending"?"bg-yellow-100 border-yellow-200 text-yellow-900 hover:bg-yellow-200":"border-indigo-200",_.order_id==h.id?"ring-2 ring-secondary-500 ring-offset-2":""])},{default:k(()=>[e("p",kt,i([h.invoice_number.substr(6),h.table_name].filter(j=>j).join(" - ")),1)]),_:2},1032,["href","class"]),C(m(l(H),{href:v.route("production.index"),class:"ml-3 focus:ring-2 focus:ring-offset-1 focus:ring-orange-500"},{default:k(()=>[m(l(se),{class:"h-5 w-5","aria-hidden":"true"})]),_:2},1032,["href"]),[[D,_.order_id==h.id]])])]))),128))])])])]),e("main",$t,[_e(v.$slots,"default")])]))}},oe="/build/assets/facility-alarm-908-ab78b208.wav",Dt={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},St={class:"px-4 sm:px-0"},Tt={class:"px-2 flex-1 flex flex-col w-full shrink-0 bg-white overflow-x-auto"},jt={class:"flex pb-32 gap-5"},Mt={class:"flex border-2 border-blue-500 rounded-lg gap-5"},Ot={class:"relative w-64 lg:w-80 flex-1 flex flex-col text-sm text-slate-900"},It={class:"absolute mt-2 mr-2 right-0 flex justify-center items-center bg-red-600 w-10 h-10 rounded-full"},At=["onClick"],Pt={class:"flex font-semibold text-lg leading-5 text-slate-700"},zt={class:"mt-2 leading-5 text-slate-700"},Bt={key:0,class:"flex-1 flex flex-col overflow-y-auto py-6 h-48 lg:h-72"},Nt={class:"flex items-start py-1 space-x-3"},Ht={class:"w-6 h-6 flex items-center justify-center capitalize rounded-full border border-slate-700 text-sm"},Lt={class:"flex-1 capitalize font-medium text-sm lg:text-base"},Et={class:"relative h-6 flex items-center justify-start border border-l-0 rounded-full bg-lime-500 border-slate-700 font-medium text-lime-900 space-x-1"},Kt={class:"w-6 h-6 flex items-center justify-center rounded-full bg-white border border-slate-700"},Ft={class:""},Rt=e("span",{class:"pr-1.5 text-xs"},"pcs",-1),Vt={key:1,class:"flex-1 flex flex-col overflow-y-auto py-6 h-72"},Ut=e("li",{class:"flex items-center border-t border-slate-400/20 py-3"},[e("p",{class:"text-sm text-center font-medium text-red-800 bg-red-50 w-full px-4 py-2"},"Not found")],-1),qt=[Ut],Wt={key:2,class:"flex items-start border border-dashed border-slate-700 pb-3"},Yt={class:"leading-5 text-slate-700"},Gt={class:"absolute bottom-0 w-full -mb-28 px-3 py-3 h-32 flex flex-col justify-center items-center"},Jt={class:"mt-4 text-base font-medium"},Xt={class:"text-base font-medium"},Zt={key:0,class:"text-lg font-medium text-slate-800"},Qt={class:""},es={class:"flex border-2 border-transparent rounded-lg gap-5"},ts={class:"relative w-64 lg:w-80 flex-1 flex flex-col text-sm text-slate-900"},ss={class:"absolute mt-2 mr-2 right-0 flex justify-center items-center bg-red-600 w-10 h-10 rounded-full"},ls=["onClick"],as={class:"flex font-semibold text-lg leading-5 text-slate-700"},os={class:"mt-2 leading-5 text-slate-700"},ns={key:0,class:"flex-1 flex flex-col overflow-y-auto py-6 h-48 lg:h-72"},rs={class:"flex items-start py-1 space-x-3"},is={class:"w-6 h-6 flex items-center justify-center capitalize rounded-full border border-slate-700 text-sm"},cs={class:"flex-1 capitalize font-medium text-sm lg:text-base"},ds={class:"relative h-6 flex items-center justify-start border border-l-0 rounded-full bg-lime-500 border-slate-700 font-medium text-lime-900 space-x-1"},us={class:"w-6 h-6 flex items-center justify-center rounded-full bg-white border border-slate-700"},fs={class:""},hs=e("span",{class:"pr-1.5 text-xs"},"pcs",-1),ms={key:1,class:"flex-1 flex flex-col overflow-y-auto py-6 h-72"},ps=e("li",{class:"flex items-center border-t border-slate-400/20 py-3"},[e("p",{class:"text-sm text-center font-medium text-red-800 bg-red-50 w-full px-4 py-2"},"Not found")],-1),_s=[ps],xs={key:2,class:"flex items-start border border-dashed border-slate-700 pb-3"},gs={class:"leading-5 text-slate-700"},vs={class:"absolute bottom-0 w-full -mb-28 px-3 py-3 h-32 flex flex-col justify-center items-center"},bs={class:"mt-4 text-base font-medium"},ws={class:"text-base font-medium"},ys={key:0,class:"text-lg font-medium text-slate-800"},ks={class:""},$s={class:"w-full"},Cs=e("div",{class:"flex items-center py-3"},[e("p",{class:"text-base text-center font-medium text-red-800 bg-red-50 w-full px-4 py-2"},"Production order empty. No order found!")],-1),Ds=[Cs],As={__name:"Production",props:{auth:Object,errors:Object,kitchen:Object,productions:Array,pending_orders:Array,order_productions:Array},setup(n){const s=n,u=ce({production_id:"",status:""}),_=de({isAlarming:!1,seconds:null,time:null}),o=w(null),y=w(null),f=w(null),p=w(s.auth.user.is_cook),b=w(s.auth.user.is_waiter),T=()=>{f.value&&clearInterval(f.value),f.value=setInterval(function(){let a=new Date().getHours(),j=new Date().getMinutes(),t=new Date().getSeconds();_.time=a+":"+j+":"+t,_.seconds=t,_.isAlarming=[0,1,2].includes(t),p.value&&_.seconds==0&&s.productions.find(d=>d.status=="pending"&&!d.is_viewed)&&new Audio(oe).play(),b.value&&_.seconds==0&&s.productions.find(d=>d.waiter_alert)&&new Audio(oe).play()},1e3)};U(()=>{I(),T()}),xe(()=>{I(),T()}),ge(()=>o.value,a=>{u.production_id=a==null?void 0:a.id,p.value&&!a.is_viewed&&u.post(route("production.view"),{onSuccess:()=>{},onFinish:()=>{u.reset()}})});const M=a=>{o.value=a},A=a=>p.value&&!a.is_viewed||b.value&&a.waiter_alert,x=a=>a.id==u.production_id&&(b.value&&a.waiter_alert||p.value&&a.is_viewed&&s.kitchen&&a.status!="complete"),O=()=>{u.status="next",p.value?u.post(route("production.status"),{onSuccess:()=>{},onFinish:()=>{u.reset()}}):b.value?u.post(route("production.delivered"),{onSuccess:()=>{},onFinish:()=>{u.reset()}}):alert("Only Waiter and chef / barista can change production status")};function v(a){return new Date(a).getTime()}function I(){y.value&&clearInterval(y.value);let a=s.productions,j=s.order_productions;y.value=setInterval(function(){a.forEach(t=>{var d=new Date().getTime(),g=d-v(t.created_at);g=t.accepted_at?d-v(t.accepted_at):g,g=t.completed_at?d-v(t.completed_at):g;var z=Math.floor(g%(1e3*60*60*24)/(1e3*60*60)),B=Math.floor(g%(1e3*60*60)/(1e3*60)),E=Math.floor(g%(1e3*60)/1e3);let q=E?E+" Secs":"",W=B?B+" Mins ":"",Y=z?z+" Hrs ":"";B!=""||z!=""?t.calculated_time=Y+W:t.calculated_time=q}),j.forEach(t=>{var d=new Date().getTime(),g=d-v(t.created_at);g=t.accepted_at?d-v(t.accepted_at):g,g=t.completed_at?d-v(t.completed_at):g;var z=Math.floor(g%(1e3*60*60*24)/(1e3*60*60)),B=Math.floor(g%(1e3*60*60)/(1e3*60)),E=Math.floor(g%(1e3*60)/1e3);let q=E?E+" Secs":"",W=B?B+" Mins ":"",Y=z?z+" Hrs ":"";B!=""||z!=""?t.calculated_time=Y+W:t.calculated_time=q})},1e3)}const h={pending:{notifyText:"Waiting",notifyClass:"text-yellow-800",switchClass:"bg-yellow-200 text-stone-800",cardClassNotViewed:"bg-yellow-100 shadow-stone-300",cardClass:"bg-green-100 shadow-green-700",buttonText:"Accept",buttonClass:"bg-green-600 hover:bg-green-700 text-white text-lg shadow-green-700 focus:ring-green-600"},accept:{notifyText:"Cooking",notifyClass:"text-red-500",switchClass:"bg-green-300 text-stone-800",cardClass:"bg-blue-100 shadow-stone-300",buttonText:"Set Done",buttonClass:"bg-blue-600 hover:bg-blue-700 text-white text-lg shadow-blue-700 focus:ring-blue-600"},complete:{notifyText:"Finished",notifyClass:"text-neutral-800",switchClass:"bg-neutral-100 text-neutral-800",cardClass:"bg-neutral-100 shadow-stone-300",buttonText:"Delivered",buttonClass:"bg-yellow-600 hover:bg-yellow-700 text-white text-lg shadow-yellow-700 focus:ring-yellow-600"}};return(a,j)=>(r(),c(P,null,[m(l(ve),{title:"Kitchen"}),m(Ct,null,{default:k(()=>[e("div",Dt,[m(je),e("div",St,[e("div",Tt,[e("section",jt,[C(e("div",Mt,[(r(!0),c(P,null,N(n.order_productions,t=>(r(),c("div",{key:t.id,class:"relative focus:outline-none"},[e("div",Ot,[C(e("div",It,[m(l(le),{class:S([_.isAlarming?"animate-wiggle":"","w-7 h-7 text-yellow-100"])},null,8,["class"])],512),[[D,A(t)]]),e("div",{onClick:d=>M(t),class:S(["px-4 py-4 rounded-lg shadow-slate-400/50",t.id==l(u).production_id?"shadow-lg":"shadow",t.is_viewed?h[t.status].cardClass:h[t.status].cardClassNotViewed])},[e("h2",Pt,[$(" Order "),m(l(ae),{class:"ml-2 h-5 w-5","aria-hidden":"true"}),$(" "+i(t.order_number.substr(6)),1)]),e("p",zt,"Ref: "+i(t.stuff_name),1),t?(r(),c("ul",Bt,[(r(!0),c(P,null,N((t==null?void 0:t.items)??[],(d,g)=>C((r(),c("li",{key:g},[e("div",Nt,[e("div",Ht,i(parseInt(g)+1),1),e("div",Lt,i(d.product_name),1),e("div",Et,[e("div",Kt,[e("span",Ft,i(d.quantity),1)]),Rt])])])),[[D,d.quantity!=0]])),128))])):(r(),c("ul",Vt,qt)),t.order_note?(r(),c("div",Wt,[e("p",Yt,"Note: "+i(t.order_note),1)])):R("",!0)],10,At),e("div",Gt,[C(e("button",{onClick:O,type:"button",class:S([h[t.status].buttonClass,"inline-flex items-center px-10 py-1.5 border border-transparent shadow-md text-lg uppercase tracking-widest font-medium rounded text-white focus:outline-none focus:ring-2 focus:ring-offset-2"])},i(h[t.status].buttonText),3),[[D,x(t)]]),e("p",Jt,[$(" Order time: "),e("span",null,i(t.created_at_format),1)]),C(e("p",Xt,[$(" Duration: "),e("span",null,i(t.time_duration),1)],512),[[D,t.completed_at]]),t.delivered_at?(r(),c("h3",Zt,"Delivered")):(r(),c("h3",{key:1,class:S(["text-lg font-medium",h[t.status].notifyClass])},[$(i(t.calculated_time)+" ",1),e("span",Qt,i(h[t.status].notifyText),1)],2))])])]))),128))],512),[[D,n.order_productions.length>0]]),C(e("div",es,[(r(!0),c(P,null,N(n.productions,t=>(r(),c("div",{key:t.id,class:"relative focus:outline-none"},[e("div",ts,[C(e("div",ss,[m(l(le),{class:S([_.isAlarming?"animate-wiggle":"","w-7 h-7 text-yellow-100"])},null,8,["class"])],512),[[D,A(t)]]),e("div",{onClick:d=>M(t),class:S(["px-4 py-4 rounded-lg shadow-slate-400/50",t.id==l(u).production_id?"shadow-lg":"shadow",t.is_viewed?h[t.status].cardClass:h[t.status].cardClassNotViewed])},[e("h2",as,[$(" Order "),m(l(ae),{class:"ml-2 h-5 w-5","aria-hidden":"true"}),$(" "+i(t.order_number.substr(6)),1)]),e("p",os,"Ref: "+i(t.stuff_name),1),t?(r(),c("ul",ns,[(r(!0),c(P,null,N(t.items,(d,g)=>C((r(),c("li",{key:g},[e("div",rs,[e("div",is,i(parseInt(g)+1),1),e("div",cs,i(d.product_name),1),e("div",ds,[e("div",us,[e("span",fs,i(d.quantity),1)]),hs])])])),[[D,d.quantity!=0]])),128))])):(r(),c("ul",ms,_s)),t.order_note?(r(),c("div",xs,[e("p",gs,"Note: "+i(t.order_note),1)])):R("",!0)],10,ls),e("div",vs,[C(e("button",{type:"button",onClick:O,class:S([h[t.status].buttonClass,"inline-flex items-center px-10 py-1.5 border border-transparent shadow-md text-lg uppercase tracking-widest font-medium rounded text-white focus:outline-none focus:ring-2 focus:ring-offset-2"])},i(h[t.status].buttonText),3),[[D,x(t)]]),e("p",bs,[$(" Order time: "),e("span",null,i(t.created_at_format),1)]),C(e("p",ws,[$(" Duration: "),e("span",null,i(t.time_duration),1)],512),[[D,t.completed_at]]),t.delivered_at?(r(),c("h3",ys,"Delivered")):(r(),c("h3",{key:1,class:S(["text-lg font-medium",h[t.status].notifyClass])},[$(i(t.calculated_time)+" ",1),e("span",ks,i(h[t.status].notifyText),1)],2))])])]))),128))],512),[[D,n.productions.length>0]]),C(e("div",$s,Ds,512),[[D,n.productions.length==0&&n.order_productions.length==0]])])])])])]),_:1})],64))}};export{As as default};
