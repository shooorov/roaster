import{u as $,x as re,n as P,o as C,y as se,e as de,l as Y,K as ve,H as q,f as ne,t as X,i as pe,m as ce,a as _,p as be,k as fe,O as me,b as E}from"./XMarkIcon-1e2e326f.js";import{p as xe}from"./XMarkIcon-4b7ba5d6.js";import{f as ge,a as ye}from"./hidden-253ee999.js";import{d as Oe,e as Re,r as Se}from"./CheckIcon-20c25c5e.js";import{o as he,n as Ce}from"./TruckIcon-2f13eb25.js";import{G as H,r as T,h as f,R as m,J as Ie,k as te,m as Q,I as oe,F as ue,E as ee,H as Pe,L as Ve,P as L,o as U,c as W,w as z,b as Z,a as G,n as M,u as j,f as ae,p as we,t as Te,g as le}from"./app-4cf649ca.js";import{r as ke}from"./ChevronUpDownIcon-0b91429b.js";function Ae(o,I){return o===I}var Ee=(o=>(o[o.Open=0]="Open",o[o.Closed=1]="Closed",o))(Ee||{}),Fe=(o=>(o[o.Single=0]="Single",o[o.Multi=1]="Multi",o))(Fe||{}),Be=(o=>(o[o.Pointer=0]="Pointer",o[o.Other=1]="Other",o))(Be||{});let ie=Symbol("ComboboxContext");function J(o){let I=Ve(ie,null);if(I===null){let R=new Error(`<${o} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(R,J),R}return I}let De=H({name:"Combobox",emits:{"update:modelValue":o=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Ae},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(o,{slots:I,attrs:R,emit:k}){let e=T(1),t=T(null),b=T(null),r=T(null),l=T(null),v=T({static:!1,hold:!1}),p=T([]),x=T(null),V=T(1),w=T(!1);function D(n=s=>s){let s=x.value!==null?p.value[x.value]:null,d=me(n(p.value.slice()),c=>C(c.dataRef.domRef)),u=s?d.indexOf(s):null;return u===-1&&(u=null),{options:d,activeOptionIndex:u}}let F=f(()=>o.multiple?1:0),g=f(()=>o.nullable),[a,y]=Oe(f(()=>o.modelValue),n=>k("update:modelValue",n),f(()=>o.defaultValue)),O=f(()=>a.value===void 0?$(F.value,{1:[],0:void 0}):a.value),A=null,S=null,i={comboboxState:e,value:O,mode:F,compare(n,s){if(typeof o.by=="string"){let d=o.by;return(n==null?void 0:n[d])===(s==null?void 0:s[d])}return o.by(n,s)},defaultValue:f(()=>o.defaultValue),nullable:g,inputRef:b,labelRef:t,buttonRef:r,optionsRef:l,disabled:f(()=>o.disabled),options:p,change(n){y(n)},activeOptionIndex:f(()=>{if(w.value&&x.value===null&&p.value.length>0){let n=p.value.findIndex(s=>!s.dataRef.disabled);n!==-1&&(x.value=n)}return x.value}),activationTrigger:V,optionsPropsRef:v,closeCombobox(){w.value=!1,!o.disabled&&e.value!==1&&(e.value=1,x.value=null)},openCombobox(){if(w.value=!0,o.disabled||e.value===0)return;let n=p.value.findIndex(s=>{let d=m(s.dataRef.value);return $(F.value,{0:()=>i.compare(m(i.value.value),m(d)),1:()=>m(i.value.value).some(u=>i.compare(m(u),m(d)))})});n!==-1&&(x.value=n),e.value=0},goToOption(n,s,d){w.value=!1,A!==null&&cancelAnimationFrame(A),A=requestAnimationFrame(()=>{if(o.disabled||l.value&&!v.value.static&&e.value===1)return;let u=D();if(u.activeOptionIndex===null){let h=u.options.findIndex(K=>!K.dataRef.disabled);h!==-1&&(u.activeOptionIndex=h)}let c=re(n===P.Specific?{focus:P.Specific,id:s}:{focus:n},{resolveItems:()=>u.options,resolveActiveIndex:()=>u.activeOptionIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.disabled});x.value=c,V.value=d??1,p.value=u.options})},selectOption(n){let s=p.value.find(u=>u.id===n);if(!s)return;let{dataRef:d}=s;y($(F.value,{0:()=>d.value,1:()=>{let u=m(i.value.value).slice(),c=m(d.value),h=u.findIndex(K=>i.compare(c,m(K)));return h===-1?u.push(c):u.splice(h,1),u}}))},selectActiveOption(){if(i.activeOptionIndex.value===null)return;let{dataRef:n,id:s}=p.value[i.activeOptionIndex.value];y($(F.value,{0:()=>n.value,1:()=>{let d=m(i.value.value).slice(),u=m(n.value),c=d.findIndex(h=>i.compare(u,m(h)));return c===-1?d.push(u):d.splice(c,1),d}})),i.goToOption(P.Specific,s)},registerOption(n,s){S&&cancelAnimationFrame(S);let d={id:n,dataRef:s},u=D(c=>(c.push(d),c));if(x.value===null){let c=s.value.value;$(F.value,{0:()=>i.compare(m(i.value.value),m(c)),1:()=>m(i.value.value).some(h=>i.compare(m(h),m(c)))})&&(u.activeOptionIndex=u.options.indexOf(d))}p.value=u.options,x.value=u.activeOptionIndex,V.value=1,u.options.some(c=>!C(c.dataRef.domRef))&&(S=requestAnimationFrame(()=>{let c=D();p.value=c.options,x.value=c.activeOptionIndex}))},unregisterOption(n){var s;i.activeOptionIndex.value!==null&&((s=i.options.value[i.activeOptionIndex.value])==null?void 0:s.id)===n&&(w.value=!0);let d=D(u=>{let c=u.findIndex(h=>h.id===n);return c!==-1&&u.splice(c,1),u});p.value=d.options,x.value=d.activeOptionIndex,V.value=1}};se([b,r,l],()=>i.closeCombobox(),f(()=>e.value===0)),Ie(ie,i),de(f(()=>$(e.value,{0:Y.Open,1:Y.Closed})));let B=f(()=>i.activeOptionIndex.value===null?null:p.value[i.activeOptionIndex.value].dataRef.value),N=f(()=>{var n;return(n=C(b))==null?void 0:n.closest("form")});return te(()=>{Q([N],()=>{if(!N.value||o.defaultValue===void 0)return;function n(){i.change(o.defaultValue)}return N.value.addEventListener("reset",n),()=>{var s;(s=N.value)==null||s.removeEventListener("reset",n)}},{immediate:!0})}),()=>{let{name:n,disabled:s,form:d,...u}=o,c={open:e.value===0,disabled:s,activeIndex:i.activeOptionIndex.value,activeOption:B.value,value:O.value};return oe(ue,[...n!=null&&O.value!=null?Re({[n]:O.value}).map(([h,K])=>oe(ge,ve({features:ye.Hidden,key:h,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:d,name:h,value:K}))):[],q({theirProps:{...R,...ne(u,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])},ourProps:{},slot:c,slots:I,attrs:R,name:"Combobox"})])}}}),Ne=H({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-combobox-button-${X()}`}},setup(o,{attrs:I,slots:R,expose:k}){let e=J("ComboboxButton");k({el:e.buttonRef,$el:e.buttonRef});function t(l){e.disabled.value||(e.comboboxState.value===0?e.closeCombobox():(l.preventDefault(),e.openCombobox()),L(()=>{var v;return(v=C(e.inputRef))==null?void 0:v.focus({preventScroll:!0})}))}function b(l){switch(l.key){case E.ArrowDown:l.preventDefault(),l.stopPropagation(),e.comboboxState.value===1&&e.openCombobox(),L(()=>{var v;return(v=e.inputRef.value)==null?void 0:v.focus({preventScroll:!0})});return;case E.ArrowUp:l.preventDefault(),l.stopPropagation(),e.comboboxState.value===1&&(e.openCombobox(),L(()=>{e.value.value||e.goToOption(P.Last)})),L(()=>{var v;return(v=e.inputRef.value)==null?void 0:v.focus({preventScroll:!0})});return;case E.Escape:if(e.comboboxState.value!==0)return;l.preventDefault(),e.optionsRef.value&&!e.optionsPropsRef.value.static&&l.stopPropagation(),e.closeCombobox(),L(()=>{var v;return(v=e.inputRef.value)==null?void 0:v.focus({preventScroll:!0})});return}}let r=pe(f(()=>({as:o.as,type:I.type})),e.buttonRef);return()=>{var l,v;let p={open:e.comboboxState.value===0,disabled:e.disabled.value,value:e.value.value},{id:x,...V}=o,w={ref:e.buttonRef,id:x,type:r.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(l=C(e.optionsRef))==null?void 0:l.id,"aria-expanded":e.comboboxState.value===0,"aria-labelledby":e.labelRef.value?[(v=C(e.labelRef))==null?void 0:v.id,x].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:b,onClick:t};return q({ourProps:w,theirProps:V,slot:p,attrs:I,slots:R,name:"ComboboxButton"})}}}),$e=H({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${X()}`}},emits:{change:o=>!0},setup(o,{emit:I,attrs:R,slots:k,expose:e}){let t=J("ComboboxInput"),b=f(()=>ce(C(t.inputRef))),r={value:!1};e({el:t.inputRef,$el:t.inputRef});function l(){t.change(null);let a=C(t.optionsRef);a&&(a.scrollTop=0),t.goToOption(P.Nothing)}let v=f(()=>{var a;let y=t.value.value;return C(t.inputRef)?typeof o.displayValue<"u"&&y!==void 0?(a=o.displayValue(y))!=null?a:"":typeof y=="string"?y:"":""});te(()=>{Q([v,t.comboboxState,b],([a,y],[O,A])=>{if(r.value)return;let S=C(t.inputRef);S&&((A===0&&y===1||a!==O)&&(S.value=a),requestAnimationFrame(()=>{var i;if(r.value||!S||((i=b.value)==null?void 0:i.activeElement)!==S)return;let{selectionStart:B,selectionEnd:N}=S;Math.abs((N??0)-(B??0))===0&&B===0&&S.setSelectionRange(S.value.length,S.value.length)}))},{immediate:!0}),Q([t.comboboxState],([a],[y])=>{if(a===0&&y===1){if(r.value)return;let O=C(t.inputRef);if(!O)return;let A=O.value,{selectionStart:S,selectionEnd:i,selectionDirection:B}=O;O.value="",O.value=A,B!==null?O.setSelectionRange(S,i,B):O.setSelectionRange(S,i)}})});let p=T(!1);function x(){p.value=!0}function V(){he().nextFrame(()=>{p.value=!1})}function w(a){switch(r.value=!0,a.key){case E.Enter:if(r.value=!1,t.comboboxState.value!==0||p.value)return;if(a.preventDefault(),a.stopPropagation(),t.activeOptionIndex.value===null){t.closeCombobox();return}t.selectActiveOption(),t.mode.value===0&&t.closeCombobox();break;case E.ArrowDown:return r.value=!1,a.preventDefault(),a.stopPropagation(),$(t.comboboxState.value,{0:()=>t.goToOption(P.Next),1:()=>t.openCombobox()});case E.ArrowUp:return r.value=!1,a.preventDefault(),a.stopPropagation(),$(t.comboboxState.value,{0:()=>t.goToOption(P.Previous),1:()=>{t.openCombobox(),L(()=>{t.value.value||t.goToOption(P.Last)})}});case E.Home:if(a.shiftKey)break;return r.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(P.First);case E.PageUp:return r.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(P.First);case E.End:if(a.shiftKey)break;return r.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(P.Last);case E.PageDown:return r.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(P.Last);case E.Escape:if(r.value=!1,t.comboboxState.value!==0)return;a.preventDefault(),t.optionsRef.value&&!t.optionsPropsRef.value.static&&a.stopPropagation(),t.nullable.value&&t.mode.value===0&&t.value.value===null&&l(),t.closeCombobox();break;case E.Tab:if(r.value=!1,t.comboboxState.value!==0)return;t.mode.value===0&&t.selectActiveOption(),t.closeCombobox();break}}function D(a){I("change",a),t.nullable.value&&t.mode.value===0&&a.target.value===""&&l(),t.openCombobox()}function F(){r.value=!1}let g=f(()=>{var a,y,O,A;return(A=(O=(y=o.defaultValue)!=null?y:t.defaultValue.value!==void 0?(a=o.displayValue)==null?void 0:a.call(o,t.defaultValue.value):null)!=null?O:t.defaultValue.value)!=null?A:""});return()=>{var a,y,O,A,S,i;let B={open:t.comboboxState.value===0},{id:N,displayValue:n,onChange:s,...d}=o,u={"aria-controls":(a=t.optionsRef.value)==null?void 0:a.id,"aria-expanded":t.comboboxState.value===0,"aria-activedescendant":t.activeOptionIndex.value===null||(y=t.options.value[t.activeOptionIndex.value])==null?void 0:y.id,"aria-labelledby":(S=(O=C(t.labelRef))==null?void 0:O.id)!=null?S:(A=C(t.buttonRef))==null?void 0:A.id,"aria-autocomplete":"list",id:N,onCompositionstart:x,onCompositionend:V,onKeydown:w,onInput:D,onBlur:F,role:"combobox",type:(i=R.type)!=null?i:"text",tabIndex:0,ref:t.inputRef,defaultValue:g.value,disabled:t.disabled.value===!0?!0:void 0};return q({ourProps:u,theirProps:d,slot:B,attrs:R,slots:k,features:_.RenderStrategy|_.Static,name:"ComboboxInput"})}}}),je=H({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(o,{attrs:I,slots:R,expose:k}){let e=J("ComboboxOptions"),t=`headlessui-combobox-options-${X()}`;k({el:e.optionsRef,$el:e.optionsRef}),ee(()=>{e.optionsPropsRef.value.static=o.static}),ee(()=>{e.optionsPropsRef.value.hold=o.hold});let b=be(),r=f(()=>b!==null?(b.value&Y.Open)===Y.Open:e.comboboxState.value===0);return xe({container:f(()=>C(e.optionsRef)),enabled:f(()=>e.comboboxState.value===0),accept(l){return l.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:l.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(l){l.setAttribute("role","none")}}),()=>{var l,v,p;let x={open:e.comboboxState.value===0},V={"aria-labelledby":(p=(l=C(e.labelRef))==null?void 0:l.id)!=null?p:(v=C(e.buttonRef))==null?void 0:v.id,id:t,ref:e.optionsRef,role:"listbox","aria-multiselectable":e.mode.value===1?!0:void 0},w=ne(o,["hold"]);return q({ourProps:V,theirProps:w,slot:x,attrs:I,slots:R,features:_.RenderStrategy|_.Static,visible:r.value,name:"ComboboxOptions"})}}}),Le=H({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(o,{slots:I,attrs:R,expose:k}){let e=J("ComboboxOption"),t=`headlessui-combobox-option-${X()}`,b=T(null);k({el:b,$el:b});let r=f(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===t:!1),l=f(()=>$(e.mode.value,{0:()=>e.compare(m(e.value.value),m(o.value)),1:()=>m(e.value.value).some(g=>e.compare(m(g),m(o.value)))})),v=f(()=>({disabled:o.disabled,value:o.value,domRef:b}));te(()=>e.registerOption(t,v)),Pe(()=>e.unregisterOption(t)),ee(()=>{e.comboboxState.value===0&&r.value&&e.activationTrigger.value!==0&&L(()=>{var g,a;return(a=(g=C(b))==null?void 0:g.scrollIntoView)==null?void 0:a.call(g,{block:"nearest"})})});function p(g){if(o.disabled)return g.preventDefault();e.selectOption(t),e.mode.value===0&&e.closeCombobox(),Ce()||requestAnimationFrame(()=>{var a;return(a=C(e.inputRef))==null?void 0:a.focus()})}function x(){if(o.disabled)return e.goToOption(P.Nothing);e.goToOption(P.Specific,t)}let V=fe();function w(g){V.update(g)}function D(g){V.wasMoved(g)&&(o.disabled||r.value||e.goToOption(P.Specific,t,0))}function F(g){V.wasMoved(g)&&(o.disabled||r.value&&(e.optionsPropsRef.value.hold||e.goToOption(P.Nothing)))}return()=>{let{disabled:g}=o,a={active:r.value,selected:l.value,disabled:g},y={id:t,ref:b,role:"option",tabIndex:g===!0?void 0:-1,"aria-disabled":g===!0?!0:void 0,"aria-selected":l.value,disabled:void 0,onClick:p,onFocus:x,onPointerenter:w,onMouseenter:w,onPointermove:D,onMousemove:D,onPointerleave:F,onMouseleave:F};return q({ourProps:y,theirProps:o,slot:a,attrs:R,slots:I,name:"ComboboxOption"})}}});const Me={class:"relative w-full h-full"},Ye={__name:"Combobox",props:{items:{type:Array,default:[]},modelValue:[Object,Number,String,Boolean],position:{default:"bottom"},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(o,{emit:I}){const R=o,k=T(""),e=T(R.items.find(b=>R.modelValue==b.id)??""),t=f(()=>k.value===""?R.items:R.items.filter(b=>(console.log(b),b.name.toLowerCase().includes(k.value.toLowerCase()))));return Q(()=>e.value,()=>{I("update:modelValue",e.value.id)}),(b,r)=>(U(),W(j(De),{as:"div",modelValue:e.value,"onUpdate:modelValue":r[1]||(r[1]=l=>e.value=l)},{default:z(()=>[Z("div",Me,[G(j($e),{class:M([o.disabled?"bg-gray-100":"","w-full h-full rounded-md border border-gray-300 bg-white py-2 pl-3 pr-10 focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500 sm:text-sm"]),onChange:r[0]||(r[0]=l=>k.value=l.target.value),displayValue:l=>l.name,Placeholder:"Select",autocomplete:"off",disabled:o.disabled},null,8,["class","displayValue","disabled"]),G(j(Ne),{class:M([o.disabled?"cursor-default":"","absolute inset-y-0 right-0 flex items-center rounded-r px-2 focus:outline-none"]),disabled:o.disabled},{default:z(()=>[G(j(ke),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1},8,["class","disabled"]),t.value.length>0?(U(),W(j(je),{key:0,class:M([o.position=="top"?"bottom-10 mb-1":"mt-1","absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"])},{default:z(()=>[(U(!0),ae(ue,null,we(t.value,l=>(U(),W(j(Le),{key:l.id,value:l,as:"template"},{default:z(({active:v,selected:p})=>[Z("li",{class:M(["relative cursor-default select-none py-2 pl-3 pr-9",v?"bg-primary-100 text-primary-900":"text-gray-900"])},[Z("span",{class:M(["block truncate",p&&"font-semibold"])},Te(l.name??"N/A"),3),p?(U(),ae("span",{key:0,class:M(["absolute inset-y-0 right-0 flex items-center pr-4",v?"text-primary-600":"text-primary-500"])},[G(j(Se),{class:"h-5 w-5","aria-hidden":"true"})],2)):le("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1},8,["class"])):le("",!0)])]),_:1},8,["modelValue"]))}};export{Ye as _};
